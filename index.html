<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>éŠæˆ²ç‹€æ…‹ç›£æ§</title>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<style>
  body { font-family: Arial, sans-serif; background: #f5f5f5; color: #333; margin: 0; padding: 0;}
  .container { max-width: 600px; margin: 50px auto; padding: 20px; background: #fff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
  h1 { text-align: center; }
  .status { font-size: 1.2rem; margin: 10px 0; }
  button { width: 100%; padding: 12px; font-size: 1rem; border: none; border-radius: 8px; background: #007bff; color: white; cursor: pointer; margin-top: 10px;}
  button:active { background: #0056b3; }
</style>
</head>
<body>
<div class="container">
  <h1>éŠæˆ²ç‹€æ…‹ç›£æ§</h1>
  <div class="status">ç›®å‰éŠæˆ²ç‹€æ…‹ï¼š<span id="gameStatus">æœªä¸Šç·š</span></div>
  <button id="inviteBtn">é‚€è«‹ä¸Šç·š</button>
</div>

<script>
  // ğŸ”¹ Firebase é…ç½®
  const firebaseConfig = {
    apiKey: "AIzaSyDrcsNwolJ33wYPtgHBFbQMHTpNVcgSngs",
    authDomain: "nova-game-status.firebaseapp.com",
    databaseURL: "https://nova-game-status-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "nova-game-status",
    storageBucket: "nova-game-status.firebasestorage.app",
    messagingSenderId: "441392361547",
    appId: "1:441392361547:web:8ba275c3caae6033499dce",
    measurementId: "G-J8QD6GXYL8"
  };

  // ğŸ”¹ åˆå§‹åŒ– Firebase
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const gameStatusEl = document.getElementById('gameStatus');
  const inviteBtn = document.getElementById('inviteBtn');

  // ğŸ”¹ ç›£è½éŠæˆ²ç‹€æ…‹
  const playingRef = db.ref('playing');
  playingRef.on('value', (snapshot) => {
    const playing = snapshot.val();
    gameStatusEl.textContent = playing ? 'ä¸Šç·šä¸­' : 'æœªä¸Šç·š';
  });

  // ğŸ”¹ æŒ‰ä¸‹é‚€è«‹æŒ‰éˆ•
  inviteBtn.addEventListener('click', () => {
    const inviteRef = db.ref('inviteRequest');
    inviteRef.set(true)  // å°‡ Firebase inviteRequest è¨­ç‚º true
      .then(() => alert('å·²ç™¼é€é‚€è«‹ä¸Šç·šè¨Šè™Ÿ'))
      .catch(err => alert('ç™¼é€å¤±æ•—ï¼š' + err));
  });
</script>
</body>
</html>